MDScreen:
    # ScreenManager al mateix nivell que el MDNavigationDrawer per mantenir el menú a sobre
    ScreenManager:
        id: screen_manager

        HomeScreen:
        RankingScreen:
        StatisticsScreen:
        ReinforcementActivitiesScreen:

    # El BoxLayout principal amb la barra superior
    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            id: top_bar
            title: "MoonKEY"
            left_action_items: [["menu", lambda x: nav_drawer.set_state("toggle")]]
            elevation: 0

        MDBoxLayout:
            orientation: 'vertical'
            id: content

    # Definim el Navigation Drawer com a últim element per garantir que quedi a sobre
    MDNavigationDrawer:
        id: nav_drawer
        elevation: 0

        MDBoxLayout:
            orientation: "vertical"
            spacing: "8dp"
            padding: "10dp"

            # Texto de la marca
            Image:
                source: '../../image/logo/text_moonkey.png'
                size_hint_y: 0.2
                allow_stretch: True

            MDList:
                size_hint_y: 0.7

                OneLineAvatarListItem:
                    text: "Home"
                    on_release:
                        app.menu_callback("home")
                    IconLeftWidget:
                        icon: "home"

                OneLineAvatarListItem:
                    text: "Ranking"
                    on_release:
                        app.menu_callback("ranking")
                    IconLeftWidget:
                        icon: "trophy"

                OneLineAvatarListItem:
                    text: "Statistics"
                    on_release:
                        app.menu_callback("statistics")
                    IconLeftWidget:
                        icon: "chart-line"

                OneLineAvatarListItem:
                    text: "Reinforcement Activities"
                    on_release:
                        app.menu_callback("reinforcement_activities")
                    IconLeftWidget:
                        icon: "arm-flex"
            
            # Logo principal
            Image:
                source: '../../image/logo/logo_icon.png'
                size_hint_y: 0.1
                allow_stretch: True
