<SubjectScreen>:
    ScrollView:
        do_scroll_x: False  # Only allow vertical scrolling
        do_scroll_y: True

        MDBoxLayout:
            orientation: 'vertical'
            padding: dp(10)
            spacing: dp(10)
            adaptive_height: True  # Adjust height based on content

            # Espaciador
            Widget:
                size_hint_y: None
                height: "10dp"

            MDBoxLayout:
                orientation: 'vertical'
                spacing: dp(10)
                size_hint_y: None
                height: dp(100)


                MDLabel:
                    text: "Partial Grade:"
                    halign: "center"
                    font_style: "Body1"

                MDLabel:
                    id: partial_grade
                    text: "3.3"
                    halign: "center"
                    font_style: "H6"
            
            MDBoxLayout:
                orientation: 'horizontal'
                spacing: dp(10)
                size_hint_y: None
                height: dp(100)


                # Column with grades
                MDBoxLayout:
                    orientation: 'vertical'
                    spacing: dp(10)
                    size_hint_x: 0.5

                    MDLabel:
                        text: "Final Grade:"
                        halign: "center"
                        font_style: "Body1"

                    MDLabel:
                        id: final_grade
                        text: "3.3"
                        halign: "center"
                        font_style: "H6"

                    MDLabel:
                        text: "Recovery Grade:"
                        halign: "center"
                        font_style: "Body1"

                    MDLabel:
                        id: recovery_grade
                        text: "13.3"
                        halign: "center"
                        font_style: "H6"

                MDBoxLayout:
                    orientation: 'vertical'
                    spacing: dp(10)
                    size_hint_x: 0.5

                    MDLabel:
                        text: "Estimated Final Grade:"
                        halign: "center"
                        font_style: "Body1"

                    MDLabel:
                        id: estimated_final_grade
                        text: "0.0"
                        halign: "center"
                        font_style: "H6"
                    

                    MDLabel:
                        text: "Estimated Recovery Grade:"
                        halign: "center"
                        font_style: "Body1"

                    MDLabel:
                        id: estimated_recovery_grade
                        text: "0.0"
                        halign: "center"
                        font_style: "H6"

            MDBoxLayout:
                id: pie_chart_box
                orientation: 'vertical'
                size_hint_x: 0.6
                    

            MDLabel:
                text: "Nota d'Activitat Promig:"
                halign: "center"
                font_style: "H5"
                size_hint_y: None
                height: dp(40)

            # Pie Chart Section (Activity grade average)
            MDBoxLayout:
                id: activity_chart_box
                orientation: 'vertical'
                size_hint_y: None
                height: dp(200)

            # Line chart for the activity grade history
            MDLabel:
                text: "Historial de Notes Finals"
                halign: "center"
                font_style: "H5"
                size_hint_y: None
                height: dp(40)

            MDBoxLayout:
                id: line_chart_box
                orientation: 'vertical'
                size_hint_y: None
                height: dp(200)

            # Return Button
            MDRaisedButton:
                text: "Torna a les Estad√≠stiques"
                pos_hint: {"center_x": 0.5}
                on_release: root.manager.current = "statistics"
